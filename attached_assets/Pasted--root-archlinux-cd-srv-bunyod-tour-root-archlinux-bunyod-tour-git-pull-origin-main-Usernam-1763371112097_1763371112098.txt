[root@archlinux ~]# cd /srv/bunyod-tour
[root@archlinux bunyod-tour]# git pull origin main
Username for 'https://github.com': greyversarex
Password for 'https://greyversarex@github.com':
remote: Enumerating objects: 29, done.
remote: Counting objects: 100% (29/29), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 23 (delta 17), reused 23 (delta 17), pack-reused 0 (from 0)
Unpacking objects: 100% (23/23), 31.50 KiB | 768.00 KiB/s, done.
From https://github.com/greyversarex/bunyod-tour-production
 * branch            main       -> FETCH_HEAD
   1bc1db1..6db74c9  main       -> origin/main
Updating 1bc1db1..6db74c9
Fast-forward
 .gitignore                                         |  11 +
 .replit                                            |   2 +-
 RECOVERY_PLAN.md                                   | 304 +++++++++++++++++++++
 ...-root-root-114K-1763369466589_1763369466589.txt | 122 +++++++++
 ...ot-243K-Oct-11--1763369333359_1763369333359.txt |  70 +++++
 replit.md                                          |  84 +++---
 update.sh                                          |  49 ++++
 7 files changed, 607 insertions(+), 35 deletions(-)
 create mode 100644 RECOVERY_PLAN.md
 create mode 100644 attached_assets/Pasted--root-archlinux-ls-lh-srv-bunyod-tour-uploads-images-total-44M-rw-r-r-1-root-root-114K-1763369466589_1763369466589.txt
 create mode 100644 attached_assets/Pasted--root-archlinux-ls-lh-var-backups-bunyod-tour-total-30M-rw-r-r-1-root-root-243K-Oct-11--1763369333359_1763369333359.txt
[root@archlinux bunyod-tour]# ./update.sh
ğŸ”„ ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ bunyod-tour...
ğŸ§· Ğ‘ÑĞºĞ°Ğ¿ Ğ‘Ğ” Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼...
âœ… Ğ‘ÑĞºĞ°Ğ¿ Ğ³Ğ¾Ñ‚Ğ¾Ğ²
ğŸ“¥ Git fetch/reset...
Username for 'https://github.com': greyversarex
Password for 'https://greyversarex@github.com':
HEAD is now at 6db74c9 Update image upload directory with new files
ğŸ›¡ï¸ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° uploads symlink...
ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ /var/bunyod-tour/uploads...
âœ… ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾
âš ï¸ Symlink uploads Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´Ñ‘Ğ½
ğŸ”— Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ symlink /srv/bunyod-tour/uploads -> /var/bunyod-tour/uploads
âš ï¸ ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¿ĞºĞ° uploads, Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰Ğ°Ñ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ğ² Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ...
âœ… Symlink ÑĞ¾Ğ·Ğ´Ğ°Ğ½: uploads -> /var/bunyod-tour/uploads
âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° uploads Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
ğŸ“¦ npm ci...
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead

> workspace@1.0.0 postinstall
> prisma generate

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update available 6.15.0 -> 6.19.0                      â”‚
â”‚  Run the following to update                            â”‚
â”‚    npm i --save-dev prisma@latest                       â”‚
â”‚    npm i @prisma/client@latest                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ” Generated Prisma Client (v6.15.0) to ./node_modules/@prisma/client in 683ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Need your database queries to be 1000x faster? Accelerate offers you that and more: https://pris.ly/tip-2-accelerate


added 489 packages, and audited 490 packages in 29s

52 packages are looking for funding
  run `npm fund` for details

2 moderate severity vulnerabilities

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
ğŸ”§ Prisma generate...
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

âœ” Generated Prisma Client (v6.15.0) to ./node_modules/@prisma/client in 861ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Interested in query caching in just a few lines of code? Try Accelerate today! https://pris.ly/tip-3-accelerate

ğŸ—ï¸ ĞšĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ...

> workspace@1.0.0 build
> tsc

ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¾Ğ² (ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚)...
ğŸ—„ï¸ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑÑ manual Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸...
DO
ALTER TABLE
COMMENT
COMMENT
COMMENT
ğŸ”„ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑÑ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ custom_tour_orders (TEXT -> JSONB)...
BEGIN
psql:/srv/bunyod-tour/manual_migrations/002_custom_tour_orders_jsonb.sql:75: NOTICE:  selected_countries is already JSONB, skipping
psql:/srv/bunyod-tour/manual_migrations/002_custom_tour_orders_jsonb.sql:75: NOTICE:  selected_cities is already JSONB, skipping
psql:/srv/bunyod-tour/manual_migrations/002_custom_tour_orders_jsonb.sql:75: NOTICE:  tourists is already JSONB, skipping
psql:/srv/bunyod-tour/manual_migrations/002_custom_tour_orders_jsonb.sql:75: NOTICE:  selected_components is already JSONB, skipping
DO
COMMIT
     column_name     | data_type
---------------------+-----------
 selected_cities     | jsonb
 selected_components | jsonb
 selected_countries  | jsonb
 tourists            | jsonb
(4 rows)

âœ… ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ custom_tour_orders ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ°
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "bunyod_tour", schema "public" at "localhost:5432"

The database is already in sync with the Prisma schema.

âœ” Generated Prisma Client (v6.15.0) to ./node_modules/@prisma/client in 764ms

ğŸš€ ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· PM2...
[PM2] Applying action reloadProcessId on app [bunyod-tour](ids: [ 0 ])
[PM2] [bunyod-tour](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ bunyod-tour        â”‚ fork     â”‚ 81   â”‚ online    â”‚ 0%       â”‚ 7.3mb    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
ğŸ©º Healthcheck...
âš ï¸ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾, Ğ½Ğ¾ healthz != 200 (Ğ±Ñ‹Ğ» 000). ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ»Ğ¾Ğ³Ğ¸: pm2 logs bunyod-tour --lines 100
ğŸ‰ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾.
