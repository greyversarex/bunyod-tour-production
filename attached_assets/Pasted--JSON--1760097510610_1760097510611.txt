Проанализируй весь репозиторий и выдай ОДИН валидный JSON без комментариев и пояснений, строго по схеме ниже. Никаких лишних ключей, пустые значения ставь null, булевы — true/false, списки — [] при отсутствии.

{
  "project": {
    "name": "<по package.json или имени папки>",
    "commit_sha": "<git rev-parse HEAD, если доступно>",
    "has_git": true|false
  },
  "runtime": {
    "node_version_engine": "<package.json.engines.node или null>",
    "node_version_detected": "<node -v или null>",
    "package_manager": "npm|pnpm|yarn|null"
  },
  "scripts": {
    "start": "<package.json.scripts.start или null>",
    "build": "<...build или null>",
    "dev": "<...dev или null>",
    "seed": "<...seed или null>"
  },
  "entrypoints": {
    "pm2_ecosystem": {
      "exists": true|false,
      "apps": ["<имена из ecosystem.config.js>"],
      "primary_entry": "<скрипт/файл, который запускается>",
      "env_modes": ["production","development","..."] 
    },
    "node_entry_fallback": "<например index.js или null>"
  },
  "web": {
    "port_expectation": {
      "source": "env|hardcoded|unknown",
      "value": "<число или null>",
      "resolution_order": ["PORT", "default(4000)"]
    },
    "http_endpoints": ["/api/health","/healthz","/"], 
    "needs_websocket": true|false
  },
  "frontend": {
    "type": "static|next|vite|none",
    "build_cmd": "<команда сборки или null>",
    "build_dir": "<папка сборки или null>",
    "public_dir": "<если есть, иначе null>"
  },
  "env": {
    "example_file": ".env.example|null",
    "required": [
      {"name":"DATABASE_URL","description":"назначение","example":"...","constraint":"postgresql|sqlite|mysql|..."},
      {"name":"PORT","description":"порт HTTP","example":"4000","constraint":"int>0"},
      {"name":"JWT_SECRET","description":"секрет токенов","example":"***","constraint":"non-empty"}
      // перечисли весь обязательный набор для запуска
    ]
  },
  "prisma": {
    "exists": true|false,
    "provider": "postgresql|sqlite|mysql|null",
    "schema_path": "prisma/schema.prisma|null",
    "has_migrations": true|false,
    "needs_migrate": true|false,
    "db_url_template": "<шаблон из .env.example или null>",
    "seed_script_defined": true|false
  },
  "uploads_and_fs": {
    "upload_dirs": ["uploads","storage","public/uploads"],
    "must_exist_at_runtime": ["<директории, которые сервер ожидает>"],
    "write_permissions_note": "<если есть требования>"
  },
  "repo": {
    "gitignore_missing": ["пути, которые стоит добавить если отсутствуют"],
    "must_be_in_repo": ["ecosystem.config.js",".env.example","prisma/schema.prisma","frontend/", "src/", "index.js"]
  },
  "nginx_template": {
    "example_server_block_for_port": 4000
  }
}
Требования:

Возвращай строго JSON, без Markdown-рамок и пояснений.

Значение web.port_expectation.value вычисли из кода: если в коде берётся process.env.PORT || 4000, укажи "source":"env", "value":4000.

Если ecosystem.config.js задаёт порт переменными env для production, покажи это через pm2_ecosystem.env_modes.

В env.required выведи полный перечень критичных переменных из .env.example с короткими описаниями.

yaml
Копировать код
