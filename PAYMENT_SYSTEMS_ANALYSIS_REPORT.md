# üîç –ê–ù–ê–õ–ò–ó –ü–õ–ê–¢–ï–ñ–ù–´–• –°–ò–°–¢–ï–ú BUNYOD-TOUR
**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 25 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è

---

## üìä –û–ë–©–ò–ô –û–ë–ó–û–†

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:
1. ‚úÖ **AlifPay (Alif Bank)** - –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω
2. ‚úÖ **Payler** - –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω/–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è
3. ‚ö†Ô∏è **Stripe** - –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
4. ‚ùå **Payme** - –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω (—Ç–æ–ª—å–∫–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ)
5. ‚ùå **Click** - –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω (—Ç–æ–ª—å–∫–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ)

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–û–¢–°–£–¢–°–¢–í–£–Æ–¢ –í–°–ï API –ö–õ–Æ–ß–ò –ò –°–ï–ö–†–ï–¢–´** ‚õî
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø  
**–í–ª–∏—è–Ω–∏–µ:** –ü–ª–∞—Ç–µ–∂–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—Ä–∞–±–æ—á–∏–µ

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:**
```
‚ùå STRIPE_SECRET_KEY
‚ùå STRIPE_WEBHOOK_SECRET
‚ùå ALIF_MERCHANT_KEY
‚ùå ALIF_MERCHANT_PASSWORD
‚ùå PAYLER_KEY
‚ùå PAYME_MERCHANT_ID
‚ùå CLICK_MERCHANT_ID
‚ùå EMAIL_USER (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π)
‚ùå EMAIL_PASSWORD
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –î–æ–±–∞–≤–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ Secrets –≤ Replit
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

---

### 2. **–ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò API –ö–õ–Æ–ß–ï–ô** ‚ö†Ô∏è
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –í–´–°–û–ö–ê–Ø  
**–í–ª–∏—è–Ω–∏–µ:** –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
- **AlifPay Controller** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `ALIF_MERCHANT_KEY`, `ALIF_MERCHANT_PASSWORD`
- **PaymentRoutes** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `ALIF_KEY`, `ALIF_PASSWORD`

**–§–∞–π–ª—ã —Å –ø—Ä–æ–±–ª–µ–º–æ–π:**
- `src/controllers/alifController.ts` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- `src/routes/paymentRoutes.ts` –ª–∏–Ω–∏–∏ 319, 372-373 (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í paymentRoutes.ts –∑–∞–º–µ–Ω–∏—Ç—å:
enabled: !!(process.env.ALIF_KEY && process.env.ALIF_PASSWORD)
// –ù–∞:
enabled: !!(process.env.ALIF_MERCHANT_KEY && process.env.ALIF_MERCHANT_PASSWORD)
```

---

### 3. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ü–õ–ê–¢–ï–ñ–ù–´–• –†–û–£–¢–û–í** ‚ö†Ô∏è
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø  
**–í–ª–∏—è–Ω–∏–µ:** –ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ –∫–æ–¥–µ, –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–ù–∞–π–¥–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**

**AlifPay:**
- `/api/payments/alif` (—Å—Ç–∞—Ä—ã–π, –ª–∏–Ω–∏—è 345)
- `/api/payments/alif/create` (–Ω–æ–≤—ã–π, –ª–∏–Ω–∏—è 691) ‚úÖ

**Payler:**
- `/api/payments/payler` (—Å—Ç–∞—Ä—ã–π, –ª–∏–Ω–∏—è 530)
- `/api/payments/payler/create` (–Ω–æ–≤—ã–π, –ª–∏–Ω–∏—è 684) ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ä–æ—É—Ç—ã `/alif` –∏ `/payler`
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ `/alif/create` –∏ `/payler/create`
- –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö endpoint'–æ–≤

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 4. **STRIPE –ù–ï –ü–û–õ–ù–û–°–¢–¨–Æ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù**
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø  
**–í–ª–∏—è–Ω–∏–µ:** Stripe –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

**–ß—Ç–æ –µ—Å—Ç—å:**
‚úÖ Backend API endpoints (`/create-payment-intent`, `/stripe-webhook`)  
‚úÖ Payment Intent —Å–æ–∑–¥–∞–Ω–∏–µ  
‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞  

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
‚ùå –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Stripe.js –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ  
‚ùå Elements UI –¥–ª—è –≤–≤–æ–¥–∞ –∫–∞—Ä—Ç—ã  
‚ùå –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ  
‚ùå 3D Secure –æ–±—Ä–∞–±–æ—Ç–∫–∞  

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å Stripe.js –≤ `booking-step3.html`
2. –°–æ–∑–¥–∞—Ç—å Elements —Ñ–æ—Ä–º—É –¥–ª—è –∫–∞—Ä—Ç—ã
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å clientSecret –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
4. –î–æ–±–∞–≤–∏—Ç—å 3D Secure redirect

---

### 5. **–û–¢–°–£–¢–°–¢–í–£–ï–¢ STRIPE WEBHOOK SECRET**
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –í–´–°–û–ö–ê–Ø (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)  
**–í–ª–∏—è–Ω–∏–µ:** Webhook'–∏ –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET || '';
```
–ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç –ø—É—Å—Ç–æ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ Stripe Dashboard
2. –ü–æ–ª—É—á–∏—Ç—å signing secret
3. –î–æ–±–∞–≤–∏—Ç—å `STRIPE_WEBHOOK_SECRET` –≤ Secrets
4. –£–¥–∞–ª–∏—Ç—å fallback `|| ''` –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

### 6. **EMAIL –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –ù–ï –ù–ê–°–¢–†–û–ï–ù–´**
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø  
**–í–ª–∏—è–Ω–∏–µ:** –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
if (!process.env.EMAIL_USER || !process.env.EMAIL_PASSWORD) {
  return null; // Email disabled
}
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Gmail App Password –∏–ª–∏ SMTP
2. –î–æ–±–∞–≤–∏—Ç—å `EMAIL_USER` –∏ `EMAIL_PASSWORD`
3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `ADMIN_EMAIL` –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

### 7. **PAYLER CALLBACK –ë–ï–ó HMAC –í–ê–õ–ò–î–ê–¶–ò–ò**
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)  
**–í–ª–∏—è–Ω–∏–µ:** –°—Ç–∞—Ä—ã–π —Ä–æ—É—Ç —É—è–∑–≤–∏–º

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `/payler-callback` (–ª–∏–Ω–∏—è 629):**
```typescript
// ‚ùå –ù–ï–¢ –ü–†–û–í–ï–†–ö–ò –ü–û–î–ü–ò–°–ò!
if (status === 'success' || status === 'Charged') {
  // –ü–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
}
```

**–ù–æ–≤—ã–π —Ä–æ—É—Ç `/payler/callback` –∏–º–µ–µ—Ç HMAC** ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:**
–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π `/payler-callback`, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `/payler/callback` —Å HMAC

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### 8. **–î–û–ë–ê–í–ò–¢–¨ RATE LIMITING –ù–ê –ü–õ–ê–¢–ï–ñ–ù–´–ï ENDPOINT'–´**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
- –í–æ–∑–º–æ–∂–µ–Ω spam –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import { createRateLimiter } from '../middleware/rateLimiter';

const paymentLimiter = createRateLimiter({
  windowMs: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  max: 5 // 5 –ø–æ–ø—ã—Ç–æ–∫ –æ–ø–ª–∞—Ç—ã
});

router.post('/alif/create', paymentLimiter, alifController.createPayment);
```

---

### 9. **–î–û–ë–ê–í–ò–¢–¨ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ü–õ–ê–¢–ï–ñ–ù–´–• –û–ü–ï–†–ê–¶–ò–ô**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø–æ–ø—ã—Ç–∫—É –æ–ø–ª–∞—Ç—ã
- –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å callbacks
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

### 10. **–£–õ–£–ß–®–ò–¢–¨ –û–ë–†–ê–ë–û–¢–ö–£ –û–®–ò–ë–û–ö**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –û–±—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ù–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è debugging

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
catch (error) {
  console.error('Payment error:', {
    orderNumber,
    paymentMethod,
    error: error instanceof Error ? error.message : 'Unknown',
    stack: error.stack
  });
}
```

---

## üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –§–∞–∑–∞ 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–ù–ï–ú–ï–î–õ–ï–ù–ù–û)
1. ‚úÖ **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏:**
   - AlifPay (–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ Alif Bank)
   - Payler (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ payler.com)
   - Stripe (stripe.com)

2. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Replit:**
   ```bash
   ALIF_MERCHANT_KEY=xxx
   ALIF_MERCHANT_PASSWORD=xxx
   PAYLER_KEY=xxx
   STRIPE_SECRET_KEY=sk_xxx
   STRIPE_WEBHOOK_SECRET=whsec_xxx
   EMAIL_USER=your-email@gmail.com
   EMAIL_PASSWORD=app-password
   ```

3. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å AlifPay –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - –û–±–Ω–æ–≤–∏—Ç—å paymentRoutes.ts

4. ‚úÖ **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ä–æ—É—Ç—ã:**
   - –£–±—Ä–∞—Ç—å `/alif` –∏ `/payler`
   - –û—Å—Ç–∞–≤–∏—Ç—å `/alif/create` –∏ `/payler/create`

### –§–∞–∑–∞ 2: –í–ê–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø (1-2 –î–ù–Ø)
1. ‚úÖ **–ó–∞–≤–µ—Ä—à–∏—Ç—å Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:**
   - –î–æ–±–∞–≤–∏—Ç—å Stripe.js –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
   - –°–æ–∑–¥–∞—Ç—å Elements UI
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å 3D Secure

2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –î–æ–±–∞–≤–∏—Ç—å Gmail App Password
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É

3. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å rate limiting:**
   - –ó–∞—â–∏—Ç–∏—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–µ endpoint'—ã

### –§–∞–∑–∞ 3: –û–ü–¶–ò–û–ù–ê–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø (–ü–û –ù–ï–û–ë–•–û–î–ò–ú–û–°–¢–ò)
1. ‚ö™ **–î–æ–±–∞–≤–∏—Ç—å Payme/Click:**
   - –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –ø–ª–∞—Ç–µ–∂–∏ –∏–∑ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞

2. ‚ö™ **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–µ–π
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ü–û –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### AlifPay
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Merchant –∞–∫–∫–∞—É–Ω—Ç –≤ Alif Bank
- `ALIF_MERCHANT_KEY`
- `ALIF_MERCHANT_PASSWORD`

**–ö–æ–Ω—Ç–∞–∫—Ç:** Alif Bank Tajikistan (direct merchant onboarding)

---

### Payler
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Merchant account –Ω–∞ payler.com
- `PAYLER_KEY` (merchant key)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.payler.com/api/

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- ‚úÖ TJS (Tajikistani Somoni)
- ‚úÖ VISA/MasterCard
- ‚úÖ Apple Pay/Google Pay
- ‚úÖ Webhook callbacks

---

### Stripe
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Account –Ω–∞ stripe.com
- `STRIPE_SECRET_KEY`
- `STRIPE_WEBHOOK_SECRET`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://stripe.com/docs/api

**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
```html
<script src="https://js.stripe.com/v3/"></script>
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:
- [ ] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Replit
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ sandbox
- [ ] Webhook'–∏ –ø–æ–ª—É—á–∞—é—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç callbacks
- [ ] Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- [ ] –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ payment gateway
- [ ] Success/Fail —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|-----------|--------|----------------------|
| AlifPay Backend | ‚úÖ –ì–æ—Ç–æ–≤ | –î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á–∏ |
| Payler Backend | ‚úÖ –ì–æ—Ç–æ–≤ | –î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á |
| Stripe Backend | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ + —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ |
| Email —Å–∏—Å—Ç–µ–º–∞ | ‚ö†Ô∏è –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ | –î–æ–±–∞–≤–∏—Ç—å SMTP |
| Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ | –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã |
| –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è | –£–ª—É—á—à–∏—Ç—å Stripe UI |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | ‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è | –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 6/10  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚ùå –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## ‚úÖ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–°–ï–ì–û–î–ù–Ø:**
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –æ—Ç AlifPay, Payler, Stripe
   - –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Replit
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å naming inconsistency

2. **–ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï:**
   - –ó–∞–≤–µ—Ä—à–∏—Ç—å Stripe —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏

3. **–í –¢–ï–ß–ï–ù–ò–ï –ú–ï–°–Ø–¶–ê:**
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting
   - –£–ª—É—á—à–∏—Ç—å error handling

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** Replit Agent  
**–î–ª—è:** Bunyod-Tour Development Team  
**–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:** –°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤—ã—à–µ
