# Bunyod-Tour - –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

Bunyod-Tour - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–æ–≤ –¥–ª—è –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏ (–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω, –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–æ–≤, –æ—Ç–µ–ª–µ–π –∏ –≥–∏–¥–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –î–≤—É—è–∑—ã—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–†—É—Å—Å–∫–∏–π/–ê–Ω–≥–ª–∏–π—Å–∫–∏–π)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –°–∏—Å—Ç–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è —Ç—É—Ä–æ–≤ –∏ –≥–∏–¥–æ–≤
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏**: –†—É—Å—Å–∫–∏–π (RU), –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (EN)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: PostgreSQL JSONB –ø–æ–ª—è —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π `{ru: "—Ç–µ–∫—Å—Ç", en: "text"}`
- **API**: –ü–∞—Ä–∞–º–µ—Ç—Ä `?lang=ru/en` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Frontend**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ i18n —Å–∏—Å—Ç–µ–º—É

### –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª—é—Ç
- **–í–∞–ª—é—Ç—ã**: TJS (–°–æ–º–æ–Ω–∏), USD, EUR, RUB, CNY
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å –∫—É—Ä—Å–∞–º–∏ –∏–∑ –ë–î
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: 
  - TJS: —Ç–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª "—Å." –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç—ã
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ: —Å–∏–º–≤–æ–ª + –∫–æ–¥ –≤–∞–ª—é—Ç—ã

### –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ (7 –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–• –ë–õ–û–ö–û–í)
1. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—É—Ä—ã (Popular Tours)
2. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—É—Ä—ã (Combined Tours)
3. –¢—É—Ä—ã –ø–æ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω—É (Tours in Tajikistan)
4. –¢—É—Ä—ã –ø–æ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω—É (Tours in Uzbekistan)
5. –¢—É—Ä—ã –ø–æ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—É (Tours in Kazakhstan)
6. –¢—É—Ä—ã –ø–æ –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω—É (Tours in Turkmenistan)
7. –¢—É—Ä—ã –ø–æ –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω—É (Tours in Kyrgyzstan)

**–í–ê–ñ–ù–û**: –≠—Ç–∏ 7 –±–ª–æ–∫–æ–≤ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã! –û–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `prisma/seed.ts` –∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã.

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—É—Ä–æ–≤ (15 —Ç–∏–ø–æ–≤)
1. –û–¥–Ω–æ–¥–Ω–µ–≤–Ω—ã–π (Day Tours)
2. –ú–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–π (Multi-day Tours)
3. –≠–∫—Å–∫—É—Ä—Å–∏—è (Excursions)
4. –ì–æ—Ä–æ–¥—Å–∫–æ–π (City Tours)
5. –ü—Ä–∏—Ä–æ–¥–∞/—ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π (Nature/Ecological)
6. –ö—É–ª—å—Ç—É—Ä–Ω–æ –ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω—ã–π (Cultural & Educational)
7. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π (Historical)
8. –ü–æ—Ö–æ–¥—ã/—Ç—Ä–µ–∫–∫–∏–Ω–≥–∏ (Hiking/Trekking)
9. –ì–æ—Ä–Ω—ã–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç—ã (Mountain Landscapes)
10. –û–∑–µ—Ä–Ω—ã–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç—ã (Lake Landscapes)
11. –ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∏–π (Adventure)
12. –ì–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π (Gastronomic)
13. –ê–≤—Ç–æ/—Å–∞—Ñ–∞—Ä–∏/–¥–∂–∏–ø (Auto/Safari/Jeep)
14. –ê–≥—Ä–æ—Ç—É—Ä–∏–∑–º (Agrotourism)
15. VIP (VIP)

## üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + Prisma)

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

#### Tours (–¢—É—Ä—ã)
```typescript
- id: Int (PK)
- title: Json {ru, en}
- description: Json {ru, en}
- shortDesc: Json {ru, en}
- duration: String (–Ω–∞–ø—Ä–∏–º–µ—Ä, "5 –¥–Ω–µ–π")
- durationDays: Int
- durationType: String ("days" / "hours")
- price: String
- currency: String (default: "TJS")
- priceType: String ("per_person" / "per_group")
- originalPrice: String (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏)
- categoryId: Int (FK -> Categories)
- countryId, cityId: Int (FK -> Countries, Cities)
- format: String ("individual" / "group_private" / "group_shared")
- tourType: String
- mainImage: String (URL –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- images: String (JSON –º–∞—Å—Å–∏–≤ URL)
- services: String (JSON –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
- itinerary: String (–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞)
- itineraryEn: String (English version)
- includes/excluded: String (—á—Ç–æ –≤—Ö–æ–¥–∏—Ç/–Ω–µ –≤—Ö–æ–¥–∏—Ç)
- pickupInfo, pickupInfoEn: String
- languages: String (—è–∑—ã–∫–∏ –≥–∏–¥–æ–≤)
- difficulty: String
- maxPeople, minPeople: Int
- rating: Float
- reviewsCount: Int
- isFeatured, isDraft, isActive: Boolean
- profitMargin: Float (–ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞—Ü–µ–Ω–∫–∏)
- pricingData: String (–∫–∞–ª—å–∫—É–ª—è—Ü–∏—è —Ü–µ–Ω—ã)
- assignedGuideId: Int (FK -> Guides)
- status: String ("pending", "active", "completed")
- uniqueCode: String (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ —Ç—É—Ä–∞)
```

**–°–≤—è–∑–∏:**
- `TourBlockAssignment` (Many-to-Many —Å TourBlocks)
- `TourCategoryAssignment` (Many-to-Many —Å Categories)
- `TourCountry`, `TourCity` (Many-to-Many —Å Countries, Cities)
- `TourHotel` (Many-to-Many —Å Hotels)
- `TourGuide` (Many-to-Many —Å Guides)
- `TourDriver` (Many-to-Many —Å Drivers)
- `TourMapPoints` (–º–∞—Ä–∫–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ)
- `TourPricingComponent` (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)

#### Hotels (–û—Ç–µ–ª–∏)
```typescript
- id: Int (PK)
- name: Json {ru, en}
- description: Json {ru, en}
- address: Json {ru, en}
- images: String (JSON –º–∞—Å—Å–∏–≤)
- rating: Float (1-5)
- stars: Int (1-5)
- amenities: String (JSON —É–¥–æ–±—Å—Ç–≤)
- brand: String
- category: HotelCategory enum
- countryId, cityId: Int (FK)
- pension: String ("none", "BB", "HB", "FB")
- roomTypes: String (JSON —Ç–∏–ø–æ–≤ –Ω–æ–º–µ—Ä–æ–≤)
- mealTypes: String (JSON —Ç–∏–ø–æ–≤ –ø–∏—Ç–∞–Ω–∏—è)
- isActive, isDraft: Boolean
```

#### Guides (–ì–∏–¥—ã)
```typescript
- id: Int (PK)
- name: Json {ru, en}
- description: Json {ru, en}
- photo: String (–ø—É–±–ª–∏—á–Ω–æ–µ —Ñ–æ—Ç–æ)
- avatar: String
- documents: String (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- languages: String (–≤–ª–∞–¥–µ–Ω–∏–µ —è–∑—ã–∫–∞–º–∏)
- contact: String (email/phone)
- experience: Int (–≥–æ–¥—ã –æ–ø—ã—Ç–∞)
- rating: Float
- countryId, cityId: Int (FK)
- passportSeries: String
- registration, residenceAddress: String
- login, password: String (–¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞)
- pricePerDay: Float
- currency: String
- availableDates: String
- isHireable, isActive: Boolean
```

**–°–≤—è–∑–∏:**
- `GuideReview` (–æ—Ç–∑—ã–≤—ã –æ –≥–∏–¥–∞—Ö)
- `GuideHireRequest` (–∑–∞—è–≤–∫–∏ –Ω–∞ –Ω–∞–π–º)
- `TourGuide` (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ç—É—Ä—ã)

#### Drivers (–í–æ–¥–∏—Ç–µ–ª–∏)
```typescript
- id: Int (PK)
- name, description: String
- photo, avatar, documents: String
- licenseNumber, licenseCategory: String
- vehicleTypes, vehicleInfo, vehicleBrand: String
- vehicleYear: Int
- vehiclePhotos: String (JSON)
- experience: Int
- contact, login, password: String
- languages, workingAreas: String
- countryId, cityId: Int (FK)
- pricePerDay, pricePerHour: Float
- currency: String
- isActive: Boolean
```

#### Bookings (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) - 3-—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
```typescript
- id: Int (PK)
- tourId, hotelId: Int (FK)
- tourists: String (JSON –º–∞—Å—Å–∏–≤ —Ç—É—Ä–∏—Å—Ç–æ–≤)
- contactName, contactPhone, contactEmail: String
- tourDate: String
- numberOfTourists: Int
- numberOfNights: Int
- roomSelection: String (JSON –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤)
- mealSelection: String (JSON –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è)
- cityNights: String (JSON –Ω–æ—á–µ–π –ø–æ –≥–æ—Ä–æ–¥–∞–º)
- totalPrice: Float (–∏—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞)
- baseTotalPrice: Float (–±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
- currency, baseCurrency: String
- exchangeRate: Float
- specialRequests: String
- status: String ("draft", "pending", "confirmed")
- paymentStatus: String ("unpaid", "processing", "paid")
- createdAt, updatedAt: DateTime
```

#### Orders (–ó–∞–∫–∞–∑—ã)
```typescript
- id: Int (PK)
- orderNumber: String (unique, —Ñ–æ—Ä–º–∞—Ç: ORD-YYYYMMDD-XXXX)
- customerId: Int (FK -> Customers)
- tourId, hotelId, guideId: Int (FK)
- tourDate: String
- tourists: String (JSON)
- wishes: String
- totalAmount: Float
- status: String ("pending", "confirmed", "cancelled")
- paymentStatus: String ("unpaid", "processing", "paid", "failed")
- paymentMethod: String ("stripe", "payler", "alif")
- paymentIntentId: String (ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)
- receiptData: String (–¥–∞–Ω–Ω—ã–µ —á–µ–∫–∞)
- createdAt, updatedAt: DateTime
```

#### PriceCalculatorComponent (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
```typescript
- id: Int (PK)
- key: String (unique, –Ω–∞–ø—Ä–∏–º–µ—Ä "accommodation_std")
- name: String (—Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
- nameEn: String (English name)
- price: Float
- currency: String
- category: String ("accommodation", "guide", "meals", etc)
- isActive: Boolean
```

**–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
- –ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ: accommodation_std, accommodation_comfort, accommodation_vip
- –ì–∏–¥—ã: guide_daily, guide_vip
- –í–æ–¥–∏—Ç–µ–ª–∏: driver_4wd, driver_car, driver_minibus
- –ü–∏—Ç–∞–Ω–∏–µ: meals_full_board, meals_half_board, meals_breakfast
- –ë–∏–ª–µ—Ç—ã: entry_museum, entry_park, entry_monument
- –°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ: equipment_trekking, equipment_camping, equipment_climbing
- –°—Ç—Ä–∞—Ö–æ–≤–∫–∞: insurance_basic, insurance_premium
- –¢—Ä–∞–Ω—Å—Ñ–µ—Ä: transfer_airport, transfer_hotel, transfer_station
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: transport_tour_4wd, transport_tour_car, transport_tour_minibus

#### CustomTourOrders (–ó–∞–∫–∞–∑—ã –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä—ã)
```typescript
- id: Int (PK)
- customerName, customerEmail, customerPhone: String
- selectedCountries: String (JSON –º–∞—Å—Å–∏–≤ ID —Å—Ç—Ä–∞–Ω)
- selectedCities: String (JSON –º–∞—Å—Å–∏–≤ {cityId, countryId, daysCount})
- totalDays: Int (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)
- numberOfPeople: Int
- preferredDates: String
- specialRequests: String
- budget: String
- status: String ("pending", "processing", "confirmed", "cancelled")
- adminNotes: String
- createdAt, updatedAt: DateTime
```

#### Countries & Cities (–°—Ç—Ä–∞–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞)
```typescript
Country:
- id: Int (PK)
- name, nameRu, nameEn: String
- code: String (unique, ISO –∫–æ–¥)
- isActive: Boolean

City:
- id: Int (PK)
- name, nameRu, nameEn: String
- countryId: Int (FK -> Countries)
- isActive: Boolean
- unique: [name, countryId]
```

**–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã** (5):
1. –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω (TJ)
2. –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω (UZ)
3. –ö–∏—Ä–≥–∏–∑—Å—Ç–∞–Ω (KG)
4. –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (KZ)
5. –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω (TM)

**–ì–æ—Ä–æ–¥–∞** (12):
- –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω: –î—É—à–∞–Ω–±–µ, –•—É–¥–∂–∞–Ω–¥, –•–æ—Ä–æ–≥, –ö—É–ª—è–±
- –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω: –¢–∞—à–∫–µ–Ω—Ç, –°–∞–º–∞—Ä–∫–∞–Ω–¥, –ë—É—Ö–∞—Ä–∞
- –ö–∏—Ä–≥–∏–∑—Å—Ç–∞–Ω: –ë–∏—à–∫–µ–∫, –û—à
- –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω: –ê–ª–º–∞—Ç—ã, –ê—Å—Ç–∞–Ω–∞

#### Reviews (–û—Ç–∑—ã–≤—ã –Ω–∞ —Ç—É—Ä—ã)
```typescript
- id: Int (PK)
- customerId: Int (FK -> Customers, optional)
- tourId: Int (FK -> Tours)
- reviewerName: String
- rating: Int (1-5)
- guideRating: Int (1-5, optional)
- text: String
- photos: String (JSON –º–∞—Å—Å–∏–≤)
- isModerated, isApproved: Boolean
- createdAt, updatedAt: DateTime
```

#### GuideReviews (–û—Ç–∑—ã–≤—ã –Ω–∞ –≥–∏–¥–æ–≤)
```typescript
- id: Int (PK)
- guideId: Int (FK -> Guides)
- customerId: Int (FK -> Customers, optional)
- reviewerName: String
- rating: Int (1-5)
- text: String
- photos: String (JSON)
- isModerated, isApproved: Boolean
- createdAt, updatedAt: DateTime
```

#### Admins (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
```typescript
- id: Int (PK)
- username: String (unique)
- email: String (unique)
- password: String (bcrypt hash)
- fullName: String
- role: String ("admin", "manager")
- isActive: Boolean
- createdAt, updatedAt: DateTime
```

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: username: "admin", password –∏–∑ ENV (`ADMIN_DEFAULT_PASSWORD`)

#### ExchangeRates (–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç)
```typescript
- id: Int (PK)
- currency: String (unique: "TJS", "USD", "EUR", "RUB", "CNY")
- rate: Float (–∫—É—Ä—Å –∫ TJS)
- symbol: String (—Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã)
- name: String (–Ω–∞–∑–≤–∞–Ω–∏–µ)
- updatedAt: DateTime
```

**–ë–∞–∑–æ–≤—ã–µ –∫—É—Ä—Å—ã**:
- TJS: 1.0 (–±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞)
- USD: 0.094
- EUR: 0.086
- RUB: 9.2
- CNY: 0.65

#### Slides (–°–ª–∞–π–¥—ã –±–∞–Ω–Ω–µ—Ä–∞)
```typescript
- id: Int (PK)
- title: Json {ru, en}
- description: Json {ru, en}
- image: String (URL)
- link: String (–∫—É–¥–∞ –≤–µ–¥–µ—Ç —Å–ª–∞–π–¥)
- buttonText: Json {ru, en}
- order: Int (–ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- isActive: Boolean
- cityId: Int (FK, optional - –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≥–æ—Ä–æ–¥—É)
```

#### News (–ù–æ–≤–æ—Å—Ç–∏)
```typescript
- id: Int (PK)
- title, content, excerpt: String
- image, images: String
- tags: String (JSON)
- isPublished, isFeatured: Boolean
- publishedAt: DateTime
- slug: String (unique)
- views: Int
- readTime: Int (–º–∏–Ω—É—Ç)
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### TourBlockAssignment (–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—É—Ä–æ–≤ –≤ –±–ª–æ–∫–∏)
```typescript
- tourId, tourBlockId: Int (Composite PK)
- isPrimary: Boolean (–æ—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫?)
- unique: [tourId, tourBlockId]
```

#### TourCategoryAssignment (–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç—É—Ä–∞–º)
```typescript
- tourId, categoryId: Int (Composite PK)
- isPrimary: Boolean
- unique: [tourId, categoryId]
```

## üîß Backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Express.js + TypeScript)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.ts      # Prisma client singleton
‚îÇ   ‚îú‚îÄ‚îÄ email.ts         # Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Nodemailer)
‚îÇ   ‚îî‚îÄ‚îÄ validateEnv.ts   # –í–∞–ª–∏–¥–∞—Ü–∏—è ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ controllers/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ tourController.ts          # CRUD —Ç—É—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ bookingController.ts       # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (3 —à–∞–≥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ hotelController.ts         # CRUD –æ—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ guideController.ts         # CRUD –≥–∏–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ driverController.ts        # CRUD –≤–æ–¥–∏—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ orderController.ts         # –ó–∞–∫–∞–∑—ã
‚îÇ   ‚îú‚îÄ‚îÄ reviewController.ts        # –û—Ç–∑—ã–≤—ã –Ω–∞ —Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ guideReviewController.ts   # –û—Ç–∑—ã–≤—ã –Ω–∞ –≥–∏–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ adminController.ts         # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ paylerController.ts        # Payler –ø–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îú‚îÄ‚îÄ alifController.ts          # AlifPay –ø–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îú‚îÄ‚îÄ priceCalculatorController.ts  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ü–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ customTourController.ts    # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ tourBlockController.ts     # –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ slideController.ts         # –°–ª–∞–π–¥–µ—Ä –±–∞–Ω–Ω–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ newsController.ts          # –ù–æ–≤–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ exchangeRateController.ts  # –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ routes/          # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ts             # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ tourRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ bookingRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ hotelRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ guideRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ paymentRoutes.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ middleware/      # Middleware
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts              # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ rateLimiter.ts       # Rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.ts      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ tourGuideAuth.ts     # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–∏–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ driverAuth.ts        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ models/          # Prisma –º–æ–¥–µ–ª–∏ (–æ–±–µ—Ä—Ç–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts             # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ services/        # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ emailService.ts           # –û—Ç–ø—Ä–∞–≤–∫–∞ email
‚îÇ   ‚îú‚îÄ‚îÄ paymentService.ts         # Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ objectStorage.ts          # –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ translationService.ts     # –ü–µ—Ä–µ–≤–æ–¥—ã
‚îÇ
‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ multilingual.ts           # –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ initializeDatabase.ts     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ seedCMSData.ts           # Seed –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îî‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø—ã
    ‚îú‚îÄ‚îÄ index.ts
    ‚îî‚îÄ‚îÄ booking.ts
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

#### TourController
**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getAllTours(req, res)` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç—É—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - Query params: `?lang=ru/en`, `?blockId=1`, `?limit=10`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—É—Ä—ã
  
- `getTourById(req, res)` - –ü–æ–ª—É—á–∏—Ç—å —Ç—É—Ä –ø–æ ID
  - Query params: `?lang=ru/en`, `?includeRaw=true`
  - includeRaw: –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON + –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é)
  
- `createTour(req, res)` - –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è priceType –∏ tourType
  - –ü–∞—Ä—Å–∏–Ω–≥ JSON –ø–æ–ª–µ–π (title, description, services)
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π —Å –±–ª–æ–∫–∞–º–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, —Å—Ç—Ä–∞–Ω–∞–º–∏, –≥–æ—Ä–æ–¥–∞–º–∏
  
- `updateTour(req, res)` - –û–±–Ω–æ–≤–∏—Ç—å —Ç—É—Ä
  - –£–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ)
  
- `deleteTour(req, res)` - –£–¥–∞–ª–∏—Ç—å —Ç—É—Ä (soft delete)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
// services JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
{
  "services": [
    {
      "key": "accommodation_std",
      "name": "–ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ, —Å—Ç–∞–Ω–¥–∞—Ä—Ç",
      "nameEn": "Accommodation, STD",
      "price": 150,
      "quantity": 3
    },
    {
      "key": "guide_daily",
      "name": "–ì–∏–¥, –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π",
      "nameEn": "Tour Guide, Daily",
      "price": 80,
      "quantity": 5
    }
  ]
}

// –¶–µ–Ω–∞ —Ç—É—Ä–∞ = —Å—É–º–º–∞ –≤—Å–µ—Ö (price * quantity) + profitMargin%
```

#### BookingController (3-—à–∞–≥–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–®–∞–≥ 1 - Start Booking**
```javascript
POST /api/booking/start
{
  "tourId": 1,
  "hotelId": 5,
  "tourDate": "2025-12-01",
  "numberOfTourists": 2,
  "roomSelection": {...},
  "mealSelection": {...}
}

// –°–æ–∑–¥–∞–µ—Ç draft booking
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: bookingId, totalPrice
```

**–®–∞–≥ 2 - Update Booking Details**
```javascript
PUT /api/booking/:id
{
  "contactName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "contactPhone": "+992123456789",
  "contactEmail": "ivan@example.com",
  "tourists": [
    {"fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤", "dateOfBirth": "1990-01-01"},
    {"fullName": "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞", "dateOfBirth": "1992-05-15"}
  ],
  "specialRequests": "–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ–µ –º–µ–Ω—é"
}

// –û–±–Ω–æ–≤–ª—è–µ—Ç booking
// –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–Ω—É –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å roomSelection/mealSelection
```

**–®–∞–≥ 3 - Complete Booking**
```javascript
POST /api/booking/:id/complete
{
  "paymentMethod": "payler" // –∏–ª–∏ "stripe", "alif"
}

// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç booking (status: "confirmed")
// –°–æ–∑–¥–∞–µ—Ç Order
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

**–õ–æ–≥–∏–∫–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**
```javascript
// –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ —Ç—É—Ä–∞
let totalPrice = tour.price;

// –ï—Å–ª–∏ priceType = "per_person"
if (tour.priceType === "per_person") {
  totalPrice *= numberOfTourists;
}

// –ó–∞–º–µ–Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
if (hotelId) {
  // –í—ã—á–∏—Ç–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –∏–∑ —Ç—É—Ä–∞
  const tourAccommodationPrice = extractAccommodationPrice(tour.services);
  totalPrice -= tourAccommodationPrice * numberOfTourists;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è
  const nights = tour.durationDays - 1;
  for (const [roomType, room] of roomSelection) {
    totalPrice += room.price * room.quantity * nights;
  }
}

// –î–æ–±–∞–≤–ª—è–µ–º –ø–∏—Ç–∞–Ω–∏–µ
if (mealSelection) {
  const nights = tour.durationDays - 1;
  for (const [mealType, meal] of mealSelection) {
    if (meal.selected) {
      totalPrice += meal.price * numberOfTourists * nights;
    }
  }
}

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç—ã
if (currency !== "TJS") {
  totalPrice = totalPrice * exchangeRate;
}
```

#### PaymentController (–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã)

**Stripe Integration**
```javascript
POST /api/payments/stripe/create
{
  "orderNumber": "ORD-20251117-0001"
}

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: clientSecret, paymentIntentId
// Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Stripe Elements –¥–ª—è –æ–ø–ª–∞—Ç—ã

Webhook: POST /api/payments/stripe/webhook
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç Stripe
// –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
```

**Payler Integration (–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω)**
```javascript
POST /api/payments/payler/create
{
  "orderNumber": "ORD-20251117-0001"
}

// –°–æ–∑–¥–∞–µ—Ç session —á–µ—Ä–µ–∑ StartSession API
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: redirectUrl, sessionId
// –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ https://secure.payler.com/gapi/Pay/?session_id=XXX

Callback: POST /api/payments/payler/callback
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback –æ—Ç Payler
// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ GetStatus API
// –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑
```

**AlifPay Integration (–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω)**
```javascript
POST /api/payments/alif/create
{
  "orderNumber": "ORD-20251117-0001"
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HMAC-SHA256 token
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: formData –¥–ª—è POST –Ω–∞ https://web.alif.tj/

Callback: POST /api/payments/alif/callback
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback
// –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç HMAC –ø–æ–¥–ø–∏—Å—å
// –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑
```

### API Endpoints (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)

#### Tours
```
GET    /api/tours                    # –í—Å–µ —Ç—É—Ä—ã
GET    /api/tours/:id                # –¢—É—Ä –ø–æ ID
GET    /api/tours/:id/main-image     # –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ —Ç—É—Ä–∞
POST   /api/tours                    # –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä (Admin)
PUT    /api/tours/:id                # –û–±–Ω–æ–≤–∏—Ç—å —Ç—É—Ä (Admin)
DELETE /api/tours/:id                # –£–¥–∞–ª–∏—Ç—å —Ç—É—Ä (Admin)
```

#### Tour Blocks
```
GET    /api/tour-blocks              # –í—Å–µ –±–ª–æ–∫–∏ (7 –±–ª–æ–∫–æ–≤)
GET    /api/tour-blocks/:id          # –ë–ª–æ–∫ –ø–æ ID
GET    /api/tour-blocks/:id/tours    # –¢—É—Ä—ã –≤ –±–ª–æ–∫–µ
```

#### Categories
```
GET    /api/categories               # –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (15 —Ç–∏–ø–æ–≤)
GET    /api/categories/:id           # –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ ID
```

#### Hotels
```
GET    /api/hotels                   # –í—Å–µ –æ—Ç–µ–ª–∏
GET    /api/hotels/:id               # –û—Ç–µ–ª—å –ø–æ ID
POST   /api/hotels                   # –°–æ–∑–¥–∞—Ç—å –æ—Ç–µ–ª—å (Admin)
PUT    /api/hotels/:id               # –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–µ–ª—å (Admin)
DELETE /api/hotels/:id               # –£–¥–∞–ª–∏—Ç—å –æ—Ç–µ–ª—å (Admin)
```

#### Guides
```
GET    /api/guides                   # –í—Å–µ –≥–∏–¥—ã
GET    /api/guides/:id               # –ì–∏–¥ –ø–æ ID
POST   /api/guides                   # –°–æ–∑–¥–∞—Ç—å –≥–∏–¥–∞ (Admin)
PUT    /api/guides/:id               # –û–±–Ω–æ–≤–∏—Ç—å –≥–∏–¥–∞ (Admin)
DELETE /api/guides/:id               # –£–¥–∞–ª–∏—Ç—å –≥–∏–¥–∞ (Admin)
POST   /api/guide/login              # –õ–æ–≥–∏–Ω –≥–∏–¥–∞
GET    /api/guide/profile            # –ü—Ä–æ—Ñ–∏–ª—å –≥–∏–¥–∞ (Auth)
```

#### Guide Reviews
```
GET    /api/guide-reviews            # –í—Å–µ –æ—Ç–∑—ã–≤—ã –≥–∏–¥–æ–≤
GET    /api/guide-reviews/:id        # –û—Ç–∑—ã–≤ –ø–æ ID
POST   /api/guide-reviews            # –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
PUT    /api/guide-reviews/:id        # –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤ (Admin)
DELETE /api/guide-reviews/:id        # –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤ (Admin)
```

#### Drivers
```
GET    /api/drivers                  # –í—Å–µ –≤–æ–¥–∏—Ç–µ–ª–∏
GET    /api/drivers/:id              # –í–æ–¥–∏—Ç–µ–ª—å –ø–æ ID
POST   /api/drivers                  # –°–æ–∑–¥–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è (Admin)
PUT    /api/drivers/:id              # –û–±–Ω–æ–≤–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è (Admin)
DELETE /api/drivers/:id              # –£–¥–∞–ª–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è (Admin)
POST   /api/drivers/login            # –õ–æ–≥–∏–Ω –≤–æ–¥–∏—Ç–µ–ª—è
```

#### Bookings (3-—à–∞–≥–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
```
POST   /api/booking/start            # –®–∞–≥ 1: –ù–∞—á–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
PUT    /api/booking/:id              # –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –¥–µ—Ç–∞–ª–∏
POST   /api/booking/:id/complete     # –®–∞–≥ 3: –ó–∞–≤–µ—Ä—à–∏—Ç—å
POST   /api/booking/:id/calculate    # –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ü–µ–Ω—É
GET    /api/booking/:id              # –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```

#### Orders
```
GET    /api/orders                   # –í—Å–µ –∑–∞–∫–∞–∑—ã (Admin)
GET    /api/orders/:id               # –ó–∞–∫–∞–∑ –ø–æ ID
POST   /api/orders                   # –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
PUT    /api/orders/:id               # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑ (Admin)
DELETE /api/orders/:id               # –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑ (Admin)
```

#### Payments
```
# Stripe
POST   /api/payments/stripe/create         # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
POST   /api/payments/stripe/webhook        # Webhook –æ—Ç Stripe

# Payler
POST   /api/payments/payler/create         # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
POST   /api/payments/payler/callback       # Callback –æ—Ç Payler

# AlifPay
POST   /api/payments/alif/create           # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
POST   /api/payments/alif/callback         # Callback –æ—Ç Alif
```

#### Price Calculator (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
```
GET    /api/price-calculator/components    # –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
POST   /api/price-calculator/initialize    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
POST   /api/price-calculator/components    # –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Admin)
PUT    /api/price-calculator/components/:id # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Admin)
DELETE /api/price-calculator/components/:id # –£–¥–∞–ª–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Admin)
```

#### Custom Tours
```
POST   /api/custom-tour-orders             # –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç—É—Ä
GET    /api/custom-tour-orders             # –í—Å–µ –∑–∞–∫–∞–∑—ã (Admin)
GET    /api/custom-tour-orders/:id         # –ó–∞–∫–∞–∑ –ø–æ ID
PUT    /api/custom-tour-orders/:id         # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑ (Admin)
DELETE /api/custom-tour-orders/:id         # –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑ (Admin)
GET    /api/custom-tour/cities             # –ì–æ—Ä–æ–¥–∞ —Å –¥–Ω—è–º–∏ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–æ–≤
```

#### Countries & Cities
```
GET    /api/countries                      # –í—Å–µ —Å—Ç—Ä–∞–Ω—ã
GET    /api/countries/:id                  # –°—Ç—Ä–∞–Ω–∞ –ø–æ ID
POST   /api/countries                      # –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω—É (Admin)

GET    /api/cities                         # –í—Å–µ –≥–æ—Ä–æ–¥–∞
GET    /api/cities/:id                     # –ì–æ—Ä–æ–¥ –ø–æ ID
POST   /api/cities                         # –°–æ–∑–¥–∞—Ç—å –≥–æ—Ä–æ–¥ (Admin)

GET    /api/city-card-photos               # –§–æ—Ç–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≥–æ—Ä–æ–¥–æ–≤
POST   /api/city-card-photos               # –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ (Admin)
```

#### Reviews
```
GET    /api/reviews                        # –í—Å–µ –æ—Ç–∑—ã–≤—ã
GET    /api/reviews/:id                    # –û—Ç–∑—ã–≤ –ø–æ ID
POST   /api/reviews                        # –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
PUT    /api/reviews/:id                    # –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤ (Admin)
DELETE /api/reviews/:id                    # –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤ (Admin)
```

#### Exchange Rates
```
GET    /api/exchange-rates                 # –í—Å–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
PUT    /api/exchange-rates/:currency       # –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å (Admin)
```

#### News
```
GET    /api/news                           # –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
GET    /api/news/:id                       # –ù–æ–≤–æ—Å—Ç—å –ø–æ ID
POST   /api/news                           # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å (Admin)
PUT    /api/news/:id                       # –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å (Admin)
DELETE /api/news/:id                       # –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å (Admin)
```

#### Slides (–ë–∞–Ω–Ω–µ—Ä)
```
GET    /api/slides                         # –í—Å–µ —Å–ª–∞–π–¥—ã
GET    /api/slides/:id                     # –°–ª–∞–π–¥ –ø–æ ID
POST   /api/slides                         # –°–æ–∑–¥–∞—Ç—å —Å–ª–∞–π–¥ (Admin)
PUT    /api/slides/:id                     # –û–±–Ω–æ–≤–∏—Ç—å —Å–ª–∞–π–¥ (Admin)
DELETE /api/slides/:id                     # –£–¥–∞–ª–∏—Ç—å —Å–ª–∞–π–¥ (Admin)
```

#### Admin
```
POST   /api/admin/login                    # –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∞
GET    /api/admin/dashboard                # –î–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Auth)
```

#### System
```
GET    /healthz                            # Health check
GET    /api/health                         # API health check
```

## üé® Frontend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Vanilla JS + Tailwind CSS)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Frontend
```
frontend/
‚îú‚îÄ‚îÄ public/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout.css           # –û–±—â–∏–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n.js              # –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ multilingual-utils.js # –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout-loader.js      # –ó–∞–≥—Ä—É–∑–∫–∞ header/footer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.js              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home-page.js          # –õ–æ–≥–∏–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search-page.js        # –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ —Ç—É—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking-state.js      # –°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-helpers.js      # –ü–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified-form-handler.js # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dropdown-helpers.js   # Dropdown —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ custom-tour-cities.js # –ì–æ—Ä–æ–¥–∞ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security-utils.js     # XSS –∑–∞—â–∏—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ images/              # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ _header.html             # –®–∞–±–ª–æ–Ω —à–∞–ø–∫–∏ (inject)
‚îú‚îÄ‚îÄ _footer.html             # –®–∞–±–ª–æ–Ω —Ñ—É—Ç–µ—Ä–∞ (inject)
‚îÇ
‚îú‚îÄ‚îÄ index.html               # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ tours-search.html        # –ü–æ–∏—Å–∫ —Ç—É—Ä–æ–≤
‚îú‚îÄ‚îÄ tour-template.html       # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—É—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ booking-step1.html       # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 1 (–í—ã–±–æ—Ä –¥–∞—Ç—ã –∏ –æ—Ç–µ–ª—è)
‚îú‚îÄ‚îÄ booking-step2.html       # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 2 (–î–µ—Ç–∞–ª–∏ —Ç—É—Ä–∏—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ booking-step3.html       # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 3 (–û–ø–ª–∞—Ç–∞)
‚îÇ
‚îú‚îÄ‚îÄ hotels-catalog.html      # –ö–∞—Ç–∞–ª–æ–≥ –æ—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ hotel-template.html      # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–µ–ª—è
‚îÇ
‚îú‚îÄ‚îÄ tour-guides.html         # –ö–∞—Ç–∞–ª–æ–≥ –≥–∏–¥–æ–≤
‚îú‚îÄ‚îÄ guide-profile.html       # –ü—Ä–æ—Ñ–∏–ª—å –≥–∏–¥–∞
‚îú‚îÄ‚îÄ guide-review-form.html   # –§–æ—Ä–º–∞ –æ—Ç–∑—ã–≤–∞ –æ –≥–∏–¥–µ
‚îÇ
‚îú‚îÄ‚îÄ custom-tour-order.html   # –ó–∞–∫–∞–∑ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —Ç—É—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ news.html                # –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ news-detail.html         # –î–µ—Ç–∞–ª–∏ –Ω–æ–≤–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ admin-dashboard.html     # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (17000+ —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ guide-login.html         # –õ–æ–≥–∏–Ω –¥–ª—è –≥–∏–¥–æ–≤
‚îú‚îÄ‚îÄ driver-login.html        # –õ–æ–≥–∏–Ω –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ guide/dashboard.html     # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≥–∏–¥–∞
‚îú‚îÄ‚îÄ driver-dashboard.html    # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—è
‚îÇ
‚îú‚îÄ‚îÄ payment-success.html     # –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
‚îú‚îÄ‚îÄ payment-fail.html        # –ù–µ—É–¥–∞—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ about-us.html            # –û –Ω–∞—Å
‚îú‚îÄ‚îÄ visa-support.html        # –í–∏–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚îî‚îÄ‚îÄ transfer.html            # –¢—Ä–∞–Ω—Å—Ñ–µ—Ä
```

### –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### index.html (–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- Hero –±–∞–Ω–Ω–µ—Ä —Å —Å–ª–∞–π–¥–µ—Ä–æ–º (–∏–∑ –ë–î —á–µ—Ä–µ–∑ `/api/slides`)
- –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ —Ç—É—Ä–æ–≤ (–±–ª–æ–∫, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥, –¥–∞—Ç—ã)
- 7 –±–ª–æ–∫–æ–≤ —Ç—É—Ä–æ–≤ —Å –∫–∞—Ä—É—Å–µ–ª—è–º–∏
- –ö–∞—Ä—Ç–æ—á–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ —Å —Ñ–æ—Ç–æ
- –ö–∞—Ä—Ç–∞ –≤ —Ñ—É—Ç–µ—Ä–µ

**JavaScript:**
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–∞–π–¥–æ–≤
const slides = await fetch('/api/slides?lang=ru');

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—É—Ä–æ–≤ –ø–æ –±–ª–æ–∫–∞–º
for (const block of tourBlocks) {
  const tours = await fetch(`/api/tour-blocks/${block.id}/tours?lang=ru`);
  renderTourCarousel(block, tours);
}

// –§–∏–ª—å—Ç—Ä –ø–æ–∏—Å–∫–∞
const filters = {
  blockId: selectedBlock,
  categoryId: selectedCategory,
  countryId: selectedCountry,
  cityId: selectedCity,
  startDate: selectedDate
};
window.location.href = `/tours-search.html?${new URLSearchParams(filters)}`;
```

#### tours-search.html (–ü–æ–∏—Å–∫ —Ç—É—Ä–æ–≤)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (–±–ª–æ–∫–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å—Ç—Ä–∞–Ω—ã, –≥–æ—Ä–æ–¥–∞)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (—Ü–µ–Ω–∞, —Ä–µ–π—Ç–∏–Ω–≥, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç—É—Ä–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–î–µ—Ç–∞–ª–∏" –∏ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"

**API –≤—ã–∑–æ–≤—ã:**
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—É—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
const params = new URLSearchParams({
  lang: currentLang,
  blockId: filters.blockId,
  categoryId: filters.categoryId,
  // ... –¥—Ä—É–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
});

const tours = await fetch(`/api/tours?${params}`);
```

#### tour-template.html (–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—É—Ä–∞)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ
- –û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞ (–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ)
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞ (itinerary)
- –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ/–Ω–µ –≤–∫–ª—é—á–µ–Ω–æ
- –ö–∞—Ä—Ç–∞ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ (TourMapPoints)
- –û—Ç–∑—ã–≤—ã
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"

**–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```javascript
const tourId = new URLSearchParams(window.location.search).get('id');
const tour = await fetch(`/api/tours/${tourId}?lang=ru&includeRaw=false`);

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ
if (tour.tourMapPoints && tour.tourMapPoints.length > 0) {
  initMap(tour.tourMapPoints);
}
```

#### booking-step1.html (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 1)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –í—ã–±–æ—Ä –¥–∞—Ç—ã —Ç—É—Ä–∞ (Flatpickr –∫–∞–ª–µ–Ω–¥–∞—Ä—å)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—É—Ä–∏—Å—Ç–æ–≤
- –í—ã–±–æ—Ä –æ—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ö–∞—Ä—É—Å–µ–ª—å —Ñ–æ—Ç–æ –æ—Ç–µ–ª—è
  - –í—ã–±–æ—Ä —Ç–∏–ø–∞ –Ω–æ–º–µ—Ä–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
  - –í—ã–±–æ—Ä –ø–∏—Ç–∞–Ω–∏—è (BB, HB, FB)
  - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è Google Maps –∫–∞—Ä—Ç–∞
- –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" ‚Üí booking-step2.html

**–°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**
```javascript
// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage —á–µ—Ä–µ–∑ booking-state.js
const bookingState = {
  tourId: 1,
  hotelId: 5,
  tourDate: "2025-12-01",
  numberOfTourists: 2,
  roomSelection: {
    "standard": { quantity: 1, price: 150 },
    "deluxe": { quantity: 0, price: 250 }
  },
  mealSelection: {
    "HB": { selected: true, price: 30 }
  },
  totalPrice: 1234.56
};

// API –≤—ã–∑–æ–≤
const response = await fetch('/api/booking/start', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(bookingState)
});

const { bookingId, totalPrice } = await response.json();
// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å bookingId –≤ localStorage
```

#### booking-step2.html (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 2)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –§–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤
  - –§–ò–û
  - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è (textarea)
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" ‚Üí booking-step3.html

**API –≤—ã–∑–æ–≤:**
```javascript
const bookingId = localStorage.getItem('bookingId');

await fetch(`/api/booking/${bookingId}`, {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    contactName,
    contactPhone,
    contactEmail,
    tourists: [
      { fullName: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤", dateOfBirth: "1990-01-01" },
      { fullName: "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞", dateOfBirth: "1992-05-15" }
    ],
    specialRequests
  })
});
```

#### booking-step3.html (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –®–∞–≥ 3)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã:
  - Stripe (–∫–∞—Ä—Ç—ã –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ)
  - Payler (–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω)
  - AlifPay (–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω)
- –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å"
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É

**–ü–ª–∞—Ç–µ–∂ Payler:**
```javascript
const response = await fetch('/api/payments/payler/create', {
  method: 'POST',
  body: JSON.stringify({ orderNumber })
});

const { redirectUrl } = await response.json();
window.location.href = redirectUrl; // https://secure.payler.com/gapi/Pay/?session_id=XXX
```

**–ü–ª–∞—Ç–µ–∂ AlifPay:**
```javascript
const response = await fetch('/api/payments/alif/create', {
  method: 'POST',
  body: JSON.stringify({ orderNumber })
});

const { formData, action, method } = await response.json();

// –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–º—É –∏ submit
const form = document.createElement('form');
form.method = method; // POST
form.action = action; // https://web.alif.tj/
for (const [key, value] of Object.entries(formData)) {
  const input = document.createElement('input');
  input.type = 'hidden';
  input.name = key;
  input.value = value;
  form.appendChild(input);
}
document.body.appendChild(form);
form.submit();
```

#### admin-dashboard.html (–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å)
**–û–≥—Ä–æ–º–Ω—ã–π —Ñ–∞–π–ª (17000+ —Å—Ç—Ä–æ–∫)** —Å –ø–æ–ª–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º:

**–†–∞–∑–¥–µ–ª—ã:**
1. **–î–∞—à–±–æ—Ä–¥** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç—É—Ä—ã, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∑–∞–∫–∞–∑—ã)
2. **–¢—É—Ä—ã** - CRUD —Ç—É—Ä–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å—é
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ (Multi-select)
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Multi-select)
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω –∏ –≥–æ—Ä–æ–¥–æ–≤ (—Å –Ω–æ—á–∞–º–∏)
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
   - –ú–∞—Ä–∫–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ
3. **–û—Ç–µ–ª–∏** - CRUD –æ—Ç–µ–ª–µ–π
4. **–ì–∏–¥—ã** - CRUD –≥–∏–¥–æ–≤
5. **–í–æ–¥–∏—Ç–µ–ª–∏** - CRUD –≤–æ–¥–∏—Ç–µ–ª–µ–π
6. **–ó–∞–∫–∞–∑—ã** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
7. **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
8. **–û—Ç–∑—ã–≤—ã** - –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤
9. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
10. **–ë–ª–æ–∫–∏ —Ç—É—Ä–æ–≤** - –ü—Ä–æ—Å–º–æ—Ç—Ä (–ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –æ–Ω–∏ –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ)
11. **–°—Ç—Ä–∞–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞** - CRUD
12. **–ù–æ–≤–æ—Å—Ç–∏** - CRUD –Ω–æ–≤–æ—Å—Ç–µ–π
13. **–°–ª–∞–π–¥–µ—Ä** - CRUD —Å–ª–∞–π–¥–æ–≤ –±–∞–Ω–Ω–µ—Ä–∞
14. **–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤
15. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ü–µ–Ω** - CRUD –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
16. **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä—ã** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏
17. **–§–æ—Ç–æ –≥–æ—Ä–æ–¥–æ–≤** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≥–æ—Ä–æ–¥–æ–≤

**JavaScript –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```javascript
// –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
const TourManager = {
  async loadTours() { /* ... */ },
  async createTour(data) { /* ... */ },
  async updateTour(id, data) { /* ... */ },
  async deleteTour(id) { /* ... */ }
};

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
// - admin-helpers.js (–æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)
// - unified-form-handler.js (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã)
// - dropdown-helpers.js (–≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏)
// - security-utils.js (XSS –∑–∞—â–∏—Ç–∞)
```

### –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (i18n)

**–§–∞–π–ª—ã:**
- `public/js/i18n.js` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- `public/js/multilingual-utils.js` - –£—Ç–∏–ª–∏—Ç—ã

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
```html
<!-- HTML -->
<h1 data-translate="hero.title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
<button data-translate="buttons.book">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
```

```javascript
// i18n.js
const translations = {
  ru: {
    "hero.title": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –ê–∑–∏—é",
    "buttons.book": "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
  },
  en: {
    "hero.title": "Welcome to Central Asia",
    "buttons.book": "Book Now"
  }
};

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
function updatePageLanguage(lang) {
  document.querySelectorAll('[data-translate]').forEach(el => {
    const key = el.getAttribute('data-translate');
    el.textContent = translations[lang][key];
  });
}

// MutationObserver –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
const observer = new MutationObserver(() => {
  // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
});
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞:**
```javascript
// localStorage
localStorage.setItem('language', 'en');

// Cookie
document.cookie = `language=en; path=/`;
```

### –ó–∞–≥—Ä—É–∑–∫–∞ Layout (Header/Footer)

**layout-loader.js:**
```javascript
async function loadLayout() {
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å _header.html
  const headerHTML = await fetch('/_header.html').then(r => r.text());
  document.getElementById('header-placeholder').innerHTML = headerHTML;
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å _footer.html
  const footerHTML = await fetch('/_footer.html').then(r => r.text());
  document.getElementById('footer-placeholder').innerHTML = footerHTML;
  
  // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
  updatePageLanguage(currentLang);
}

document.addEventListener('DOMContentLoaded', loadLayout);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ï–¥–∏–Ω—ã–π header/footer –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –õ–µ–≥–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ)
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### JWT –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
```javascript
// –õ–æ–≥–∏–Ω
POST /api/admin/login
{
  "username": "admin",
  "password": "admin123"
}

// –û—Ç–≤–µ—Ç
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "admin": {
    "id": 1,
    "username": "admin",
    "role": "admin"
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Middleware:**
```typescript
// src/middleware/auth.ts
export const authenticateAdmin = async (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'No token provided' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.admin = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'Invalid token' });
  }
};
```

#### –û—Ç–¥–µ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≥–∏–¥–æ–≤
```javascript
POST /api/guide/login
{
  "login": "guide@example.com",
  "password": "password123"
}

// –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≥–∏–¥–∞ (–∑–∞—â–∏—â–µ–Ω–æ)
GET /api/guide/profile
Authorization: Bearer <guide_token>
```

#### –û—Ç–¥–µ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
```javascript
POST /api/drivers/login
{
  "login": "driver@example.com",
  "password": "password123"
}
```

### Rate Limiting

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```typescript
// src/middleware/rateLimiter.ts
import rateLimit from 'express-rate-limit';

// –î–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
export const authLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  max: 15, // 15 –ø–æ–ø—ã—Ç–æ–∫
  message: 'Too many login attempts, please try again later',
  standardHeaders: true,
  legacyHeaders: false,
  // Trust proxy –¥–ª—è Nginx
  trustProxy: true
});

// –î–ª—è API
export const apiLimiter = rateLimit({
  windowMs: 1 * 60 * 1000, // 1 –º–∏–Ω—É—Ç–∞
  max: 100, // 100 –∑–∞–ø—Ä–æ—Å–æ–≤
  trustProxy: true
});
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```typescript
// routes/adminRoutes.ts
router.post('/login', authLimiter, adminController.login);

// index.ts
app.use('/api', apiLimiter);
```

### XSS Protection

**Frontend:**
```javascript
// public/js/security-utils.js
function sanitizeHTML(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const userInput = req.body.comment;
const safe = sanitizeHTML(userInput);
```

**Backend:**
```typescript
// Prisma –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–∏
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö

// tourController.ts
if (title && typeof title !== 'string') {
  return res.status(400).json({ error: 'Invalid title format' });
}
```

### CORS Configuration

```javascript
// index.js
const corsOrigins = process.env.CORS_ORIGINS || '';
const allowlist = corsOrigins.split(',').map(s => s.trim()).filter(Boolean);

app.use(cors({
  origin(origin, callback) {
    // –†–∞–∑—Ä–µ—à–∏—Ç—å –±–µ–∑ origin (same-origin, curl)
    if (!origin) return callback(null, true);
    
    // Development mode
    if (process.env.NODE_ENV === 'development') {
      return callback(null, true);
    }
    
    // Wildcard
    if (corsOrigins === '*' || allowlist.includes('*')) {
      return callback(null, true);
    }
    
    // Whitelist
    if (allowlist.length === 0 || allowlist.includes(origin)) {
      return callback(null, true);
    }
    
    callback(new Error('Not allowed by CORS'));
  },
  credentials: true,
  allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS']
}));
```

### Environment Variables Validation

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:**
```typescript
// src/config/validateEnv.ts
export function validateEnvironment() {
  const required = ['DATABASE_URL', 'JWT_SECRET'];
  const missing = required.filter(key => !process.env[key]);
  
  if (missing.length > 0) {
    console.error('‚ùå Missing required environment variables:', missing);
    throw new Error(`Missing: ${missing.join(', ')}`);
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ JWT_SECRET –¥–ª–∏–Ω—ã (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
  if (process.env.JWT_SECRET && process.env.JWT_SECRET.length < 32) {
    throw new Error('JWT_SECRET must be at least 32 characters');
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
  const defaults = ['default-secret-key', 'fallback_secret_key'];
  if (defaults.includes(process.env.JWT_SECRET)) {
    throw new Error('JWT_SECRET must not use default value');
  }
  
  console.log('‚úÖ Environment validation passed');
}

// index.js
validateEnvironment(); // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–ï–î –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–∞
```

## üöÄ –î–µ–ø–ª–æ–π –∏ Production

### –û–∫—Ä—É–∂–µ–Ω–∏–µ

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (.env):**
```bash
# === –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï ===
DATABASE_URL="postgresql://user:password@host:5432/db?schema=public"
JWT_SECRET="your-super-secret-jwt-key-change-this-min-32-chars"
ADMIN_DEFAULT_USER=admin
ADMIN_DEFAULT_PASSWORD=***strong-password***

# === –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ ===
RUN_MIGRATIONS_ON_BOOT=false  # –î–ª—è production: false
RUN_SEED_ON_BOOT=false         # –î–ª—è production: false

# === CORS ===
CORS_ORIGINS=https://bunyodtour.tj,https://www.bunyodtour.tj

# === –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ===
STRIPE_SECRET_KEY=sk_live_xxx
PAYLER_KEY=merchant_key
ALIF_MERCHANT_KEY=xxx
ALIF_MERCHANT_PASSWORD=xxx

# === Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ===
SMTP_HOST=smtp.yandex.ru
SMTP_USER=noreply@bunyodtour.tj
SMTP_PASS=password

# === –û–∫—Ä—É–∂–µ–Ω–∏–µ ===
NODE_ENV=production
PORT=5000
BASE_URL=https://api.bunyodtour.tj
FRONTEND_URL=https://bunyodtour.tj
```

### Update Script (./update.sh)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:**
```bash
#!/bin/bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ production —Å–µ—Ä–≤–µ—Ä–∞

# 1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î
pg_dump -U bunyod_user bunyod_tour > backup_$(date +%Y%m%d_%H%M%S).sql

# 2. Pull –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–¥
git pull origin main

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate deploy

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å seed (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ)
npm run seed

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2
pm2 restart bunyod-tour

# 7. Health check
sleep 5
curl http://localhost:5000/healthz

echo "‚úÖ Update completed!"
```

### PM2 Configuration

**ecosystem.config.js:**
```javascript
module.exports = {
  apps: [{
    name: 'bunyod-tour',
    script: 'index.js',
    instances: 2,  // –ö–ª–∞—Å—Ç–µ—Ä (2 –ø—Ä–æ—Ü–µ—Å—Å–∞)
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 5000
    },
    error_file: './logs/error.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    autorestart: true,
    max_restarts: 10,
    min_uptime: '10s'
  }]
};
```

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
pm2 start ecosystem.config.js
pm2 status
pm2 logs bunyod-tour
pm2 restart bunyod-tour
pm2 stop bunyod-tour
pm2 delete bunyod-tour
```

### Nginx Reverse Proxy

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```nginx
# /etc/nginx/sites-available/bunyodtour.tj

server {
    listen 80;
    server_name bunyodtour.tj www.bunyodtour.tj;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name bunyodtour.tj www.bunyodtour.tj;
    
    # SSL (Let's Encrypt)
    ssl_certificate /etc/letsencrypt/live/bunyodtour.tj/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/bunyodtour.tj/privkey.pem;
    
    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    # Rate limiting
    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=10r/s;
    
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    location /api/ {
        limit_req zone=api_limit burst=20 nodelay;
        proxy_pass http://localhost:5000;
        # ... (—Ç–µ –∂–µ proxy headers)
    }
    
    # Static files caching
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Migration Strategy

**–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**

1. **Manual Migrations** (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã):
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
cd manual_migrations
cp template.sql 001_add_custom_tour_cities.sql

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å SQL
nano 001_add_custom_tour_cities.sql

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å
psql -U bunyod_user -d bunyod_tour -f 001_add_custom_tour_cities.sql
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:**
```sql
-- 001_add_custom_tour_cities.sql
-- Description: Add custom tour cities management
-- Date: 2025-11-15
-- IDEMPOTENT: Safe to run multiple times

BEGIN;

-- Check if table exists
DO $$
BEGIN
  IF NOT EXISTS (
    SELECT FROM pg_tables WHERE tablename = 'custom_tour_cities'
  ) THEN
    CREATE TABLE custom_tour_cities (
      id SERIAL PRIMARY KEY,
      country_id INTEGER NOT NULL REFERENCES countries(id),
      city_id INTEGER NOT NULL REFERENCES cities(id),
      days_count INTEGER NOT NULL CHECK (days_count > 0),
      UNIQUE(country_id, city_id)
    );
    
    RAISE NOTICE 'Table custom_tour_cities created';
  ELSE
    RAISE NOTICE 'Table custom_tour_cities already exists, skipping';
  END IF;
END
$$;

COMMIT;
```

2. **Prisma Migrations** (–¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π):
```bash
# Development
npx prisma db push

# Production
npx prisma migrate deploy
```

### Database Seeding

**–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π seed:**
```bash
npm run seed  # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑ –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```

**–ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç:**
- ‚úÖ 7 Tour Blocks (–∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ)
- ‚úÖ 15 Categories
- ‚úÖ 5 Countries
- ‚úÖ 12 Cities
- ‚úÖ 5 Exchange Rates
- ‚úÖ Default Admin user
- ‚ùå –ù–ï–¢ –¥–µ–º–æ-—Ç—É—Ä–æ–≤
- ‚ùå –ù–ï–¢ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**PM2 Logs:**
```bash
pm2 logs bunyod-tour          # –í—Å–µ –ª–æ–≥–∏
pm2 logs bunyod-tour --err     # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
pm2 logs bunyod-tour --out     # –¢–æ–ª—å–∫–æ output
pm2 flush bunyod-tour          # –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
```

**Nginx Logs:**
```bash
tail -f /var/log/nginx/bunyod-tour-access.log
tail -f /var/log/nginx/bunyod-tour-error.log
```

**Application Logs:**
```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
console.log('üöÄ Server started on port', PORT);
console.log('‚úÖ Database connected');
console.error('‚ùå Error:', error.message);
console.warn('‚ö†Ô∏è Warning:', message);
```

### Health Checks

**Endpoint:**
```javascript
GET /healthz

Response:
{
  "ok": true,
  "uptime": 12345.67  // —Å–µ–∫—É–Ω–¥—ã
}
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- update.sh (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
- Load balancer health checks

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–π–ª—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:
- `README.md` - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- `DEPLOYMENT_GUIDE.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
- `QUICK_DEPLOY_INSTRUCTIONS.md` - –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π
- `PAYMENT_SYSTEMS_ANALYSIS_REPORT.md` - –ê–Ω–∞–ª–∏–∑ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- `PAYLER_INTEGRATION_REQUEST.md` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Payler

### Prisma –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
```bash
# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (GUI –¥–ª—è –ë–î)
npx prisma studio

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npx prisma generate

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ schema
npx prisma format
```

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

### –°—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã
- **–Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è**: –ü—Ä–æ—Å—Ç–æ–π, –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- **–ü–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**: –£–ª—É—á—à–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ frontend**: –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º**: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã

### –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û –†–ê–ë–û–¢–´
–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ª—é–±–æ–π –∑–∞–¥–∞—á–∏:
1. –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
2. –ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
3. –ù–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–ª–æ–º–∞–Ω–æ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–æ
4. –†–∞–±–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–æ–º –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é
5. –ö–∞—á–µ—Å—Ç–≤–æ - –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ

### –î–∏–∑–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è

#### UI/UX
- **–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞**: –°—Ç—Ä–æ–≥–∞—è —Å–µ—Ä–∞—è (#3E3E3E, #2F2F2F)
- **–®—Ä–∏—Ñ—Ç**: Inter
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: Glassmorphism
- **–ó–∞–ø—Ä–µ—â–µ–Ω–æ**: –°–∏–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∏ –ª—é–±—ã–µ —Ü–≤–µ—Ç–∞ –≤–Ω–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π —Å–µ—Ä–æ–π –ø–∞–ª–∏—Ç—Ä—ã

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **Backend**: –ú–æ–¥—É–ª—å–Ω–∞—è MVC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å TypeScript
- **–ë–î**: PostgreSQL + Prisma ORM
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å**: JSONB –ø–æ–ª—è `{ru: "—Ç–µ–∫—Å—Ç", en: "text"}`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Rate limiting, XSS protection, JWT auth
- **–í–∞–ª—é—Ç—ã**: TJS, USD, EUR, RUB, CNY —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (Recent Updates)

### –ù–æ—è–±—Ä—å 2025
- ‚úÖ –í–Ω–µ–¥—Ä–µ–Ω–∞ 3-—à–∞–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Payler –∏ AlifPay
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –≥–∏–¥–æ–≤
- ‚úÖ –õ–∏—á–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã –¥–ª—è –≥–∏–¥–æ–≤ –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –¥–Ω–µ–π
- ‚úÖ –§–æ—Ç–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≥–æ—Ä–æ–¥–æ–≤
- ‚úÖ –ú–∞—Ä–∫–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–∞—Ö —Ç—É—Ä–æ–≤

### –û–∫—Ç—è–±—Ä—å 2025
- ‚úÖ –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ 7 —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–æ–≤
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω —Ç–∞–¥–∂–∏–∫—Å–∫–∏–π —è–∑—ã–∫ (—Ç–æ–ª—å–∫–æ RU/EN)
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –±–ª–æ–∫–∞–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—É—Ä–∞ –±–µ–∑ fallback –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ TJS –≤–∞–ª—é—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å —Å–∏–º–≤–æ–ª–æ–º "—Å."
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–∏—â–µ–Ω–∞: 15 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, 7 –±–ª–æ–∫–æ–≤, –Ω–µ—Ç –¥–µ–º–æ-—Ç—É—Ä–æ–≤

## üìû –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–µ–ø–ª–æ–µ–º:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `pm2 logs bunyod-tour`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î: `psql -U bunyod_user -d bunyod_tour`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx: `sudo nginx -t`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL: `sudo certbot certificates`

**Health check:**
```bash
curl http://localhost:5000/healthz
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞:**
```bash
psql -U bunyod_user -d bunyod_tour < backup_YYYYMMDD_HHMMSS.sql
```

---

**üéâ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞!**

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: 17 –Ω–æ—è–±—Ä—è 2025*
