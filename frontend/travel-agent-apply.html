<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ - Bunyod-Tour</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .partner-hero {
            background: linear-gradient(135deg, #2F2F2F 0%, #3E3E3E 100%);
            padding: 80px 20px;
            text-align: center;
            color: white;
        }
        .partner-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        .partner-benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }
        .benefit-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }
        .benefit-card h3 {
            color: #3E3E3E;
            margin: 15px 0;
        }
        .application-form {
            max-width: 700px;
            margin: 60px auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #3E3E3E;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3E3E3E;
        }
        .form-group input[type="file"] {
            padding: 8px;
        }
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 20px 0;
        }
        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-top: 4px;
        }
        .submit-btn {
            background: #3E3E3E;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
        }
        .submit-btn:hover {
            background: #2F2F2F;
        }
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .success-message {
            display: none;
            background: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .error-message {
            display: none;
            background: #f44336;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .required {
            color: red;
        }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="partner-hero">
        <div class="container">
            <h1>–°—Ç–∞–Ω—å—Ç–µ –Ω–∞—à–∏–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º</h1>
            <p style="font-size: 1.2rem; margin-top: 10px;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –≤–µ–¥—É—â–µ–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏</p>
        </div>
    </div>

    <div class="container">
        <div class="partner-benefits">
            <div class="benefit-card">
                <div style="font-size: 3rem;">üíº</div>
                <h3>–í—ã–≥–æ–¥–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏</h3>
                <p>–ü–æ–ª—É—á–∞–π—Ç–µ –¥–æ 15% –∫–æ–º–∏—Å—Å–∏–∏ —Å –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–∞</p>
            </div>
            <div class="benefit-card">
                <div style="font-size: 3rem;">üåç</div>
                <h3>–®–∏—Ä–æ–∫–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è</h3>
                <p>5 —Å—Ç—Ä–∞–Ω –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏, —Å–æ—Ç–Ω–∏ —Ç—É—Ä–æ–≤</p>
            </div>
            <div class="benefit-card">
                <div style="font-size: 3rem;">üìä</div>
                <h3>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h3>
                <p>–£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å</p>
            </div>
            <div class="benefit-card">
                <div style="font-size: 3rem;">ü§ù</div>
                <h3>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</h3>
                <p>–í—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –≤–∞—à–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</p>
            </div>
        </div>

        <div class="application-form">
            <h2 style="text-align: center; margin-bottom: 30px; color: #3E3E3E;">–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ</h2>
            
            <div class="success-message" id="successMessage">
                ‚úì –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
            </div>
            
            <div class="error-message" id="errorMessage">
                –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.
            </div>

            <form id="applicationForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label>–§–ò–û <span class="required">*</span></label>
                    <input type="text" name="fullName" required placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                </div>

                <div class="form-group">
                    <label>–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ <span class="required">*</span></label>
                    <input type="text" name="citizenship" required placeholder="–†–æ—Å—Å–∏–π—Å–∫–∞—è –§–µ–¥–µ—Ä–∞—Ü–∏—è">
                </div>

                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å <span class="required">*</span></label>
                    <textarea name="address" required rows="3" placeholder="–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è"></textarea>
                </div>

                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω <span class="required">*</span></label>
                    <input type="tel" name="phone" required placeholder="+992 –•–•–• –•–•–• –•–•–•">
                </div>

                <div class="form-group">
                    <label>Email <span class="required">*</span></label>
                    <input type="email" name="email" required placeholder="your@email.com">
                </div>

                <div class="form-group">
                    <label>–î–æ–∫—É–º–µ–Ω—Ç, —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏–π –ª–∏—á–Ω–æ—Å—Ç—å</label>
                    <input type="file" name="identityDocument" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                    <small style="color: #666;">–ü–∞—Å–ø–æ—Ä—Ç –∏–ª–∏ ID (PDF, JPG, PNG, DOC, DOCX - –¥–æ 10MB)</small>
                </div>

                <div class="form-group">
                    <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</label>
                    <input type="file" name="otherDocuments" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" multiple>
                    <small style="color: #666;">–õ–∏—Ü–µ–Ω–∑–∏–∏, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ —Ç.–¥. (–¥–æ 5 —Ñ–∞–π–ª–æ–≤)</small>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" name="agreementAccepted" id="agreementAccepted" required>
                    <label for="agreementAccepted">
                        –Ø –ø—Ä–∏–Ω–∏–º–∞—é <a href="/agreement.html" target="_blank">—É—Å–ª–æ–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞</a> <span class="required">*</span>
                    </label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" name="privacyPolicyAccepted" id="privacyPolicyAccepted" required>
                    <label for="privacyPolicyAccepted">
                        –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="/privacy.html" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> <span class="required">*</span>
                    </label>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </form>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="/js/header-footer.js"></script>
    <script>
        const form = document.getElementById('applicationForm');
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            submitBtn.disabled = true;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';

            try {
                const formData = new FormData(form);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞—è–≤–∫—É
                const response = await fetch('/api/travel-agents/applications', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    successMessage.style.display = 'block';
                    form.reset();
                    
                    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
                    successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    errorMessage.textContent = data.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏';
                    errorMessage.style.display = 'block';
                    errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            } catch (error) {
                console.error('Error:', error);
                errorMessage.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
                errorMessage.style.display = 'block';
                errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
            }
        });
    </script>
</body>
</html>
